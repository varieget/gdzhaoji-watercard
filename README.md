# 兆基水卡扇区

## 50 元数据例子

把下列数据写入特定扇区的 Block 0 和 Block 2 即可。

`9B 9B 88 13 00 64 00 00 00 00 00 00 00 FF 00 66`

5000D => 13 88 H = 88 13 注意 低位在前 高位在后

## 分析

Block 0 & Block 2

```
26 41 3F 02 00 BE 00 05 00 00 00 00 00 FF 1E 9D | 5.75 | 12/5
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
35 14 12 02 00 EB 00 08 00 00 00 00 00 FF 2D B8 | 5.30 | 12/8
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
03 0F 0D 02 00 F0 00 09 00 00 00 00 00 FF 05 E4 | 5.25 | 12/9
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
09 0A 08 02 00 F5 00 09 00 00 00 00 00 FF 0A E4 | 5.20 | 12/9
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
```

```
9B 9B 88 13 00 64 00 00 00 00 00 00 00 FF 00 66 | 50.00 | 12/9 充值后
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
7C 46 33 13 00 B9 00 09 00 00 00 00 00 FF 55 5D | 49.15 | 12/9
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
```

```
F3 C6 C5 01 00 39 00 05 00 00 00 00 00 FF 32 04 | 4.53 | 12/5
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
85 85 80 05 00 7A 00 00 00 00 00 00 00 FF 00 7C | 14.08 | 12/9 充值后
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
```

```
4D 4D 41 0C 00 B2 00 00 00 00 00 00 00 FF 00 B4 | 31.37 | 12/9 充值后
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
```

```
46 D9 C7 12 00 26 00 08 00 00 00 00 00 FF 9B 85 | 48.07 | 12/8
^^|&& price -- ~& -- DD -- -- -- -- -- -- XX|~+ |
```

`^^` 为 | 范围内的 **BCC 校验（异或校验）**

`~+` 为 | 范围内的 **和校验 取反**

`&&` 为 price 的**和校验**

```
3F+02=41
12+02=14
88+13=9B
C5+01=C6
```

`price` 为余额精确到分 **低位在前 高位在后**

```
575 D => 02 3F H = 3F 02
530 D => 02 12 H = 12 02
5000D => 13 88 H = 88 13
453 D => 01 C5 H = C5 01
```

`~&` 为 price 的**和校验 取反**

```
~41=BE
~14=EB
~9B=64
~C6=39
```

`DD` 为最后消费日期 充值后归零

`XX` 为当天累计消费金额 充值后归零 次日归零
